// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Userlogin {
  id            Int       @id @default(autoincrement())
  userName      String    @unique
  password      String    
  role          ERole     @default(EMPLOYEE)
  empId         Int
  emp           Employee @relation(fields: [empId],references:[id])
}
enum ERole {
  HR
  MANAGER
  EMPLOYEE
}






model Employee {
  id              Int       @id @default(autoincrement())
  firstName       String    
  lastName        String
  email           String    @unique
  mobile          String
  roleDescription String
  valid           Boolean   @default(true)
  depId           Int
  dept            Department  @relation(fields: [depId], references:[id])
  leaveHistory    Leave[]
}

model Department {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  manager   String
}

model Leave {
  id                Int       @id @default(autoincrement())
  employeeId        Int
  employee          Employee  @relation(fields: [employeeId],references:[id])
  leaveType         LeaveType @default(OTHERS)
  startDate         DateTime
  endDate           DateTime
  leaveDescription  String
  valid             Boolean   @default(true)
  leaveTimeStamp    DateTime  @default(now())
  leaveStatus       Status    @default(PENDING)
  statusTimeStamp   DateTime  @updatedAt()
  totalLeavesLeft   Int       @default(20)
}

enum LeaveType {
  SICK
  PAID
  COMPLIMENTARY
  LOP
  EMERGENCY
  OTHERS
}

enum Status {
  PENDING
  APPROVED
  REJECTED
}
